<template>
   <div class="main">
      <header>
         <a href="/" class="semi router-link-exact-active router-link-active">
            Eleven's Website 
         </a>
         <div class="social">
            <a href="https://discord.com/users/354343248698802187" target="_blank">
            <i class="emote fab fa-discord"></i>
            </a>
            <a href="https://github.com/elevenvac" target="_blank">
            <i class="emote fab fa-github"></i>
            </a>
            <a href="https://open.spotify.com/user/yo55g26ffwx83q0smizx52yuf" target="_blank">
            <i class="emote fab fa-spotify"></i>
            </a>
            <a href="javascript:void(0)">
            <i class="emote fab fa-medium"></i>
            </a>
         </div>
      </header>
      <section class="home">
         <h1 class="mt-normal">Hi, I'm Eleven.<br>{{ getStatusDetails }}</h1>
         <p class="mt-normal">
            I'm a Student & Full-stack developer. I'm a Currently doing projects under name of <a class="hyperlink" href="https://github.com/risedevelopment" target="_blank">Rise Development</a>. If you are curious about the music I listen to while working, you can check out my <a class="hyperlink" href="https://open.spotify.com/user/yo55g26ffwx83q0smizx52yuf" target="_blank">Spotify</a> playlists. I also share all my open source projects on <a class="hyperlink" href="https://github.com/elevenvac" target="_blank">Github</a>, including this website.
         </p>
         <a href="mailto:elevenvac@gmail.com" target="_blank" class="semi hyperlink mt-normal">elevenvac@gmail.com</a>
      </section>
      <v-footer class="text-center items-center">
         <center>
            {{ new Date().getFullYear() }} © <a href="//eleven.js.org" target="_blank">Eleven</a> — Made with &#x2764; using <a class="hyperlink" href="//vuejs.org" target="_blank">Vue</a>.
         </center>
      </v-footer>
   </div>
</template>

<style>
	@import url(https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap);
	
	html {
		line-height: 1.15;
		-webkit-text-size-adjust: 100%
	}
	body {
		margin: 0
	}
	::-webkit-file-upload-button {
		-webkit-appearance: button;
		font: inherit
	}
	*,
	:after,
	:before {
		box-sizing: inherit
	}
	html {
		box-sizing: border-box;
		text-rendering: optimizeLegibility
	}
	body {
		overflow-x: hidden;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale
	}
	body {
		font-family: Inter, Helvetica, Arial, sans-serif
	}
	main {
		display: block
	}
	h1 {
		font-size: 2em;
		margin: .67em 0
	}
	a {
		background-color: transparent
	}
	b,
	strong {
		font-weight: bolder
	}
	img {
		border-style: none
	}
	button,
	input {
		font-family: inherit;
		font-size: 100%;
		line-height: 1.15;
		margin: 0;
		overflow: visible
	}
	button {
		text-transform: none
	}
	[type=button],
	[type=reset],
	[type=submit],
	button {
		-webkit-appearance: button
	}
	[type=button]::-moz-focus-inner,
	[type=reset]::-moz-focus-inner,
	[type=submit]::-moz-focus-inner,
	button::-moz-focus-inner {
		border-style: none;
		padding: 0
	}
	[type=button]:-moz-focusring,
	[type=reset]:-moz-focusring,
	[type=submit]:-moz-focusring,
	button:-moz-focusring {
		outline: 1px dotted ButtonText
	}
	legend {
		color: inherit;
		display: table;
		max-width: 100%;
		white-space: normal
	}
	[type=checkbox],
	[type=radio],
	legend {
		box-sizing: border-box;
		padding: 0
	}
	[type=number]::-webkit-inner-spin-button,
	[type=number]::-webkit-outer-spin-button {
		height: auto
	}
	[type=search] {
		-webkit-appearance: textfield;
		outline-offset: -2px
	}
	[type=search]::-webkit-search-decoration {
		-webkit-appearance: none
	}
	[hidden],
	template {
		display: none
	}
	a {
		text-decoration: none
	}
	img {
		vertical-align: middle
	}
	h1,
	h2,
	menu,
	p,
	ul {
		margin: 0
	}
	button {
		border: 0
	}
	button,
	menu,
	ul {
		padding: 0
	}
	ul {
		list-style: none
	}
	body .dark,
	body .light {
		transition: .3s
	}
	body {
		background: #0d0d12;
		color: white
	}
	body .main {
		padding: 60px;
		display: flex;
		flex-direction: column;
		justify-content: space-between;
		min-height: 100vh
	}
	@media (max-width:620px) {
		body .main {
			padding: 30px;
			min-height: calc(var(--vh, 1vh)*100)
		}
	}
	body .mt-normal {
		margin-top: 24px
	}
	body a {
		color: inherit;
		cursor: pointer;
		display: inline-block
	}
	body h1 {
		font-weight: 700;
		font-size: 42px;
		line-height: 54px
	}
	@media (max-width:620px) {
		body h1 {
			font-size: 26px;
			line-height: 32px
		}
	}
	body .semi,
	body p {
		font-size: 24px;
		line-height: 36px
	}
	body .emote {
		font-size: 24px;
		line-height: 36px
	}
	@media (max-width:620px) {
		body .semi,
		body p {
			font-size: 18px;
			line-height: 24px
		}
		body .emote {
			font-size: 18px;
			line-height: 24px
		}

	}
	body p {
		font-weight: 400
	}
	body .semi {
		font-weight: 600
	}
	body footer,
	body header {
		display: flex;
		align-items: center;
		justify-content: space-between;
		width: 100%;
		height: 36px
	}
	body header .social a {
		margin-right: 10px
	}
	body header .social a:last-child {
		margin-right: 0
	}
	body footer #theme-button {
		transition: transform 1s ease
	}
	body .home {
		max-width: 620px
	}
	body .home .hyperlink {
		background-image: linear-gradient(120deg, #272932, #374151);
		background-repeat: no-repeat;
		background-size: 100% .2em;
		background-position: 0 88%;
		transition: background-size .25s ease-in
	}
	body .home .hyperlink:hover {
		background-size: 100% 88%
	}
	</style>
	
<script>
export default {
  data() {
    return {
      finished: false,
      lanyard: {},
      socket: null,
    }
  },
  computed: {
    /**
     * Returns status detail as string.
     * @returns {string}
     */
    getStatusDetails() {
      const lanyard = this.lanyard
      if (!lanyard) return {}
      const filtered =
        lanyard.activities?.filter((activity) => activity.type !== 4)?.pop() ||
        {}
      // Offline
      if (this.lanyard?.discord_status === "offline") return "Offline"
      // Visual Studio Code
      else if (filtered.name === "Visual Studio Code") {
        const replaced =
          filtered.state?.replace("📁 ", "")?.split(" | ")?.[0] || "a file"
        return `Editing ${replaced} in Visual Studio Code`
      }
      // YouTube Music
      else if (
        filtered.name === "YouTube Music" &&
        filtered.details &&
        filtered.state
      ) {
        const song = filtered.details || "something"
        return `Listening to ${song} on YouTube Music`
      }
      // YouTube
      else if (
        filtered.name === "YouTube" &&
        filtered.details &&
        filtered.state
      ) {
        const name = filtered.details || "a video"
        return `Watching ${name} on YouTube`
      }
      // Default values
      else
        switch (filtered.name) {
          case "Google Meet":
            return "In a Google Meet meeting"
          case "Twitch":
            return "Watching a stream on Twitch"
          case "Prime Video":
            return "Watching something on Prime Video"
          default:
            return "Online"
        }
    },
    /**
     * Returns Discord status colors.
     * @returns {string} Tailwind color classes
     */
    getDiscordStatus() {
      switch (this.lanyard.discord_status) {
        case "online":
          return "bg-green-500"
        case "idle":
          return "bg-yellow-500"
        case "dnd":
          return "bg-red-500"
        default:
          return "bg-gray-500 dark:bg-gray-200"
      }
    },
  },
  beforeDestroy() {
    this.socket?.close()
  },
  mounted() {
    /**
     * Connect to Lanyard Socket API, send heartbeat every 30 seconds and replace the Vue data value with the message
     */
    this.socket = new WebSocket("wss://api.lanyard.rest/socket")
    this.socket.addEventListener("open", () => {
      // Subscribe to ID
      this.socket.send(
        JSON.stringify({
          op: 2,
          d: {
            subscribe_to_id: "354343248698802187",
          },
        })
      )
      // Send heartbeat every 30 seconds
      setInterval(() => {
        this.socket.send(
          JSON.stringify({
            op: 3,
          })
        )
      }, 30000)
    })
    this.socket.addEventListener("message", ({ data }) => {
      const { t: type, d: status } = JSON.parse(data)
      if (type === "INIT_STATE" || type === "PRESENCE_UPDATE")
        this.lanyard = status || {}
      this.finished = true
    })
  },
}
</script>
